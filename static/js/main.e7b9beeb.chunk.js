(this["webpackJsonphive-social-network"]=this["webpackJsonphive-social-network"]||[]).push([[0],{34:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);n(34);var r=n(0),c=n.n(r),a=n(16),s=n.n(a),i=n(7),o=n(3),l=n(12),u=n(17),d=n.n(u),j=n(2),b=n(33),m=n(1),f=c.a.createContext({alerts:[],showAlert:function(e,t){return null},removeAlert:function(e){return null}});function h(e,t){switch(t.type){case"add":return[].concat(Object(b.a)(e),[{id:e.length+1,message:t.message,title:t.title}]);case"remove":return e.filter((function(e){return e.id!==t.id}));default:return e}}var x=function(e){var t=e.children,n=Object(r.useReducer)(h,[]),c=Object(j.a)(n,2),a=c[0],s=c[1],i=function(e){s({type:"remove",id:e})};return Object(r.useEffect)((function(){var e;return a.length&&(e=setTimeout((function(){i(a[0].id)}),3e3)),function(){e&&clearTimeout(e)}}),[a]),Object(m.jsx)(f.Provider,{value:{alerts:a,showAlert:function(e,t){s({type:"add",title:e,message:t})},removeAlert:i},children:t})},O=function(){return Object(r.useContext)(f)};function p(){var e=window.localStorage.getItem("color-mode");if("string"===typeof e)return e;var t=window.matchMedia("(prefers-color-scheme: dark)");return"boolean"===typeof t.matches&&t.matches?"dark":"light"}var g=c.a.createContext({colorMode:void 0,setColorMode:function(){return null}}),v=function(e){var t=e.children,n=Object(r.useState)(),c=Object(j.a)(n,2),a=c[0],s=c[1];Object(r.useEffect)((function(){s(p())}),[]);return Object(m.jsx)(g.Provider,{value:{colorMode:a,setColorMode:function(e){!function(e){document.documentElement.setAttribute("class",e)}(e),s(e),window.localStorage.setItem("color-mode",e)}},children:t})},k=n(5),y=n.n(k),w=n(10),N=n(25),S=n(26),C=n(27),E=new(function(){function e(){Object(S.a)(this,e)}return Object(C.a)(e,[{key:"post",value:function(){var e=Object(w.a)(y.a.mark((function e(t,n){var r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.hive.blog",{method:"POST",body:JSON.stringify({id:1,jsonrpc:"2.0",params:n,method:t})});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Post request failed: ".concat(r.statusText));case 5:return e.next=7,r.json();case 7:if(!(c=e.sent).error){e.next=10;break}throw new Error(c.error.message);case 10:return e.abrupt("return",c.result);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),_=new(n(28).Client)(["https://api.hive.blog"]);function A(){return(A=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post("bridge.list_pop_communities",{limit:10});case 2:return t=e.sent,e.abrupt("return",t.map((function(e){var t=Object(j.a)(e,2);return{key:t[0],title:t[1]}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.hivemind.getCommunity({name:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post("bridge.get_ranked_posts",{limit:10,sort:"trending",tag:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(w.a)(y.a.mark((function e(t){var n,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.permlink,r=t.author,e.next=3,E.post("bridge.get_post",{author:r,permlink:n});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(),s=Object(j.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(),u=Object(j.a)(l,2),d=u[0],b=u[1];return Object(r.useEffect)((function(){o(!0),function(){return A.apply(this,arguments)}().then(c).catch(b).finally((function(){o(!1)}))}),[]),{communities:n,loading:i,error:d}}function I(e){var t=Object(r.useState)({}),n=Object(j.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(),d=Object(j.a)(u,2),b=d[0],m=d[1];return Object(r.useEffect)((function(){l(!0),function(e){return T.apply(this,arguments)}(e).then(a).catch(m).finally((function(){l(!1)}))}),[e]),{community:c,loading:o,error:b}}function B(e){var t=Object(r.useState)([]),n=Object(j.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(),d=Object(j.a)(u,2),b=d[0],m=d[1];return Object(r.useEffect)((function(){l(!0),function(e){return L.apply(this,arguments)}(e).then(a).catch(m).finally((function(){return l(!1)}))}),[e]),e?{posts:c,loading:o,error:b}:[]}function R(e){var t=e.author,n=e.permlink,c=Object(r.useState)({}),a=Object(j.a)(c,2),s=a[0],i=a[1],o=Object(r.useState)(),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(r.useState)(),m=Object(j.a)(b,2),f=m[0],h=m[1];return Object(r.useEffect)((function(){d(!0),function(e){return M.apply(this,arguments)}({author:t,permlink:n}).then(i).catch(h).finally((function(){d(!1)}))}),[t,n]),{post:s,loading:u,error:f}}var J=n(15),H=n(19),U=Object(r.forwardRef)((function(e,t){var n=e.active,r=e.children,c=e.onClick,a=Object(H.a)(e,["active","children","onClick"]);return Object(m.jsx)("button",Object(J.a)(Object(J.a)({ref:t,className:d()("hover:bg-gray-800\n      hover:text-gray-200\n      dark:hover:bg-gray-200\n      dark:hover:text-gray-800\n      p-2\n      rounded-lg\n      font-semibold\n      text-lg",{"dark:bg-gray-100":n,"dark:text-gray-700":n,"bg-gray-700":n,"text-gray-100":n}),onClick:c},a),{},{children:r}))}));var q=function(e){var t=e.label,n=e.items,c=void 0===n?[]:n,a=Object(r.useState)(!1),s=Object(j.a)(a,2),o=s[0],l=s[1],u=Object(r.useRef)(),d=Object(r.createRef)();return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(r.useEffect)((function(){var r=function(r){!e.current||e.current.contains(r.target)||n.some((function(e){return e.current.contains(r.target)}))||t(r)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[e,t,n])}(u,(function(){l(!1)}),[d]),Object(m.jsxs)("div",{className:"mx-2 relative",children:[Object(m.jsx)(U,{ref:d,active:o,onClick:function(){return l(!o)},children:t}),o&&Object(m.jsx)("ul",{ref:u,className:"absolute top-12 left-0 right-0 bg-gray-700 text-gray-100 dark:text-gray-800 dark:bg-white rounded-lg",children:c.map((function(e){var t=e.label,n=e.link;return Object(m.jsx)("li",{className:"p-2 font-semibold hover:opacity-75",onClick:function(){return l(!1)},children:Object(m.jsx)(i.b,{to:n,children:t})},t)}))})]})},D=function(){var e=Object(o.f)(),t=Object(r.useContext)(g),n=t.colorMode,c=t.setColorMode,a=O().showAlert,s=P(),u=s.communities,j=s.loading,b=s.error;return Object(r.useEffect)((function(){b&&a("Error when getting communities!",b.message)}),[b]),Object(m.jsxs)("nav",{className:"flex justify-between items-center my-8",children:[Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("span",{className:"text-3xl font-semibold mr-4 text-red-500 cursor-pointer",onClick:function(){return e.push("/")},children:"Hive Social Network"}),Object(m.jsx)(q,{label:Object(m.jsxs)("span",{className:d()("flex items-center",{"opacity-60":j,"pointer-events-none":j,"cursor-wait":j}),children:["Trending Communities",j&&Object(m.jsx)(l.b,{className:"h-5 w-5 ml-2 animate-spin"})]}),items:u.map((function(e){var t=e.key;return{label:e.title,link:"/trending-communities/".concat(t)}}))}),Object(m.jsx)(U,{children:Object(m.jsx)(i.b,{to:"/proposals",children:"Proposals"})})]}),Object(m.jsxs)("button",{onClick:function(){"dark"===n?(c("light"),a("Theme changed","Just shine like a diamond \u2600\ufe0f")):(c("dark"),a("Theme changed","You can't escape from the darkness \ud83c\udf1a"))},children:["dark"===n&&Object(m.jsx)(l.c,{className:"h-10 w-10 text-yellow-300"}),"light"===n&&Object(m.jsx)(l.a,{className:"h-10 w-10 text-indigo-900"})]})]})},F=function(){var e=function(){var e=Object(r.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){Object(w.a)(y.a.mark((function e(){var t,n,r,a,s,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,e.prev=2,a=Object(N.a)(_.blockchain.getBlocks());case 4:return e.next=6,a.next();case 6:return s=e.sent,t=s.done,e.next=10,s.value;case 10:if(i=e.sent,t){e.next=17;break}c({block_id:(o=i).block_id,witness:o.witness,server_time:new Date(o.timestamp).toUTCString(),transactions:o.transaction_ids.length});case 14:t=!0,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),n=!0,r=e.t0;case 23:if(e.prev=23,e.prev=24,t||null==a.return){e.next=28;break}return e.next=28,a.return();case 28:if(e.prev=28,!n){e.next=31;break}throw r;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})))()}),[]),n}();return e?Object(m.jsxs)("div",{className:"flex flex-col",children:[Object(m.jsx)("h2",{className:"text-3xl mb-4",children:"Blockchain Info"}),Object.keys(e).map((function(t){return Object(m.jsxs)("label",{className:"flex flex-col mb-4 font-semibold text-gray-500",children:[t.toUpperCase(),Object(m.jsx)("span",{className:"font-normal text-gray-800 dark:text-white",children:e[t]})]},t)}))]}):Object(m.jsxs)("span",{className:"flex",children:["Subscribing to Blockchain Info ",Object(m.jsx)(l.b,{className:"h-5 w-5 ml-2 animate-spin"})]})},W=function(){var e=P(),t=e.communities,n=e.loading;return Object(m.jsxs)("div",{className:"prose dark:text-white",children:[Object(m.jsx)("h2",{className:"dark:text-gray-50",children:"Welcome to Hive Social Network Platform!"}),Object(m.jsx)("h3",{className:"dark:text-gray-200",children:"Select a community to explore awesome contents \ud83e\udd73"}),n?Object(m.jsx)("div",{children:"Loading Top 10 Communities..."}):Object(m.jsx)("ul",{className:"flex flex-col",children:t.map((function(e){var t=e.key,n=e.title;return Object(m.jsx)(i.b,{className:"text-lg dark:text-gray-300",to:"/trending-communities/".concat(t),children:n},t)}))})]})},Y=function(){var e=Object(o.g)().communityName,t=I(e),n=t.community,r=t.loading,c=t.error,a=B(e),s=a.posts,l=a.loading;if(r)return Object(m.jsx)("span",{children:"Loading community..."});if(c)return Object(m.jsxs)("span",{children:["An error occured when loading community: ",c.message]});var u=n.title,d=n.about,j=n.subscribers;return Object(m.jsxs)("div",{className:"w-full",children:[Object(m.jsxs)("h2",{className:"dark:text-gray-50 text-3xl",children:[u," ",Object(m.jsx)("small",{className:"font-light ml-2",children:Object(m.jsxs)("i",{children:[j," Subscribers"]})})]}),Object(m.jsx)("p",{className:"dark:text-gray-200 my-2",children:d}),Object(m.jsx)("div",{className:"flex flex-col",children:l?Object(m.jsxs)("span",{className:"text-green-400",children:["Loading community Posts for ",n.title,"..."]}):s.map((function(e){var t=e.post_id,n=e.title,r=e.permlink,c=e.author;return Object(m.jsxs)("div",{className:"flex justify-between p-4 my-2 bg-white w-full rounded-lg dark:text-gray-800",children:[n,Object(m.jsx)("button",{children:Object(m.jsx)(i.b,{to:"/trending-communities/posts/".concat(c,"/").concat(r),children:"Read"})})]},t)}))})]})},z=function(){return Object(m.jsx)("div",{children:"Proposals"})},G=n(31),K=n.n(G),Q=function(){var e=Object(o.g)(),t=R({author:e.author,permlink:e.permlink}),n=t.post,r=t.loading,c=P().communities,a=n.category,s=n.body,l=n.title,u=n.author,d=c?c.filter((function(e){return e.key!==a})):[];return Object(m.jsxs)("div",{className:" py-2 rounded-lg grid grid-cols-3",children:[Object(m.jsxs)("ul",{className:"flex flex-col px-2",children:[Object(m.jsx)("h2",{className:"text-2xl text-center mb-6",children:"Check Other Communities"}),d.map((function(e){var t=e.key,n=e.title;return Object(m.jsx)(U,{children:Object(m.jsx)(i.b,{to:"/trending-communities/".concat(t),children:n})},t)}))]}),r?Object(m.jsx)("span",{className:"text-green-400",children:"Loading..."}):Object(m.jsxs)("div",{className:"prose dark:bg-gray-50 col-span-2 p-4 rounded-lg max-w-full",children:[Object(m.jsxs)("h3",{children:["Author: ",u]}),Object(m.jsx)("h1",{children:l}),Object(m.jsx)("br",{}),Object(m.jsx)("article",{className:"prose mx-auto",dangerouslySetInnerHTML:{__html:K()(s||"")}})]})]})},V=function(){return Object(m.jsxs)(c.a.Fragment,{children:[Object(m.jsx)(D,{}),Object(m.jsxs)("section",{className:"grid grid-cols-4 gap-4",children:[Object(m.jsx)("main",{className:"col-span-3",children:Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/",exact:!0,component:W}),Object(m.jsx)(o.a,{path:"/trending-communities/:communityName",exact:!0,component:Y}),Object(m.jsx)(o.a,{path:"/trending-communities/posts/:author/:permlink",exact:!0,component:Q}),Object(m.jsx)(o.a,{path:"/proposals",exact:!0,component:z})]})}),Object(m.jsx)(F,{})]})]})},X=n(32),Z=function(e){var t=e.id,n=e.title,r=e.message,c=e.onClose;return Object(m.jsxs)("div",{className:"bg-gray-800\n      dark:bg-white\n      dark:text-gray-900\n      text-gray-50\n      flex\n      flex-col\n      p-4\n      w-80\n      rounded-lg\n      my-2 shadow-lg",children:[Object(m.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(m.jsx)("h4",{className:"text-yellow-300 dark:text-yellow-600",children:n}),Object(m.jsx)("button",{onClick:function(){return c(t)},children:Object(m.jsx)(X.a,{className:"h-6 w-6 text-white dark:text-gray-900"})})]}),r]})},$=function(){var e=O(),t=e.alerts,n=e.removeAlert;return s.a.createPortal(t.map((function(e){var t=e.id,r=Object(H.a)(e,["id"]);return Object(m.jsx)(Z,Object(J.a)({id:t,onClose:n},r),t)})),document.getElementById("alert-container"))};document.documentElement.setAttribute("class",p()),s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(i.a,{children:Object(m.jsx)(x,{children:Object(m.jsxs)(v,{children:[Object(m.jsx)($,{}),Object(m.jsx)(V,{})]})})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.e7b9beeb.chunk.js.map